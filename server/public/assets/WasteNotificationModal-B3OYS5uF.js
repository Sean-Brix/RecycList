import{r as l,j as e,A as p}from"./index-BlAmgSVr.js";const j=({notification:s,onClose:t})=>{const[n,u]=l.useState(null),[v,o]=l.useState(!0),[m,d]=l.useState(null);if(l.useEffect(()=>{(async()=>{if(!s||!s.wasteType){o(!1);return}try{o(!0),d(null);const r=await fetch(p.VIDEO_MAPPING_BY_TYPE(s.wasteType),{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!r.ok)throw new Error("Video not found for this waste type");const i=await r.json();if(i.success&&i.data)u(i.data.videoUrl);else throw new Error("No video available")}catch(r){console.error("Error fetching video:",r),d(r.message)}finally{o(!1)}})()},[s]),l.useEffect(()=>{const a=r=>{r.key==="Escape"&&t()};return document.addEventListener("keydown",a),document.body.style.overflow="hidden",()=>{document.removeEventListener("keydown",a),document.body.style.overflow="auto"}},[t]),!s)return null;const c=a=>({RECYCLABLE:"Recyclable Wastes",WET:"Wet Wastes",DRY:"Dry Wastes"})[a]||a,w=a=>({RECYCLABLE:"â™»ï¸",WET:"ðŸŽ",DRY:"ðŸ—‘ï¸"})[a]||"ðŸ“¦",h=a=>({RECYCLABLE:"#16a34a",WET:"#ca8a04",DRY:"#dc2626"})[a]||"#6b7280";return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"waste-modal-backdrop",onClick:t}),e.jsx("div",{className:"waste-modal-container",children:e.jsxs("div",{className:"waste-modal-content",children:[e.jsxs("div",{className:"waste-modal-header",style:{borderColor:h(s.wasteType)},children:[e.jsxs("div",{className:"waste-modal-icon",children:[e.jsx("span",{className:"waste-icon",children:w(s.wasteType)}),e.jsx("div",{className:"waste-icon-pulse",style:{backgroundColor:h(s.wasteType)}})]}),e.jsxs("div",{className:"waste-modal-title",children:[e.jsx("h2",{children:"New Waste Record Added"}),e.jsxs("p",{className:"waste-modal-subtitle",children:[c(s.wasteType)," â€¢ ",s.quantity||0," items"]})]}),e.jsx("button",{className:"waste-modal-close",onClick:t,"aria-label":"Close notification",children:"âœ•"})]}),e.jsxs("div",{className:"waste-modal-body",children:[v?e.jsxs("div",{className:"waste-video-loading",children:[e.jsx("div",{className:"spinner"}),e.jsx("p",{children:"Loading instructional video..."})]}):m?e.jsxs("div",{className:"waste-video-error",children:[e.jsx("span",{className:"error-icon",children:"âš ï¸"}),e.jsx("p",{children:m}),e.jsx("small",{children:"Contact administrator to upload videos for this waste type"})]}):n?e.jsxs("div",{className:"waste-video-container",children:[e.jsxs("video",{controls:!0,autoPlay:!0,className:"waste-video",onError:a=>{console.error("Video playback error:",a),d("Failed to load video")},children:[e.jsx("source",{src:n,type:"video/mp4"}),"Your browser does not support the video tag."]}),e.jsxs("p",{className:"waste-video-caption",children:["Proper disposal instructions for ",c(s.wasteType)]})]}):e.jsxs("div",{className:"waste-video-error",children:[e.jsx("span",{className:"error-icon",children:"â„¹ï¸"}),e.jsx("p",{children:"No instructional video available for this waste type"})]}),e.jsxs("div",{className:"waste-info-section",children:[e.jsxs("div",{className:"waste-info-card",children:[e.jsx("div",{className:"waste-info-label",children:"Waste Type"}),e.jsxs("div",{className:"waste-info-value",children:[w(s.wasteType)," ",c(s.wasteType)]})]}),e.jsxs("div",{className:"waste-info-card",children:[e.jsx("div",{className:"waste-info-label",children:"Quantity"}),e.jsxs("div",{className:"waste-info-value",children:[s.quantity||0," items"]})]}),e.jsxs("div",{className:"waste-info-card",children:[e.jsx("div",{className:"waste-info-label",children:"Status"}),e.jsx("div",{className:"waste-info-value",children:"âœ… Recorded Successfully"})]})]}),e.jsxs("div",{className:"waste-modal-actions",children:[e.jsx("button",{className:"btn-secondary",onClick:t,children:"Close"}),e.jsx("button",{className:"btn-primary",onClick:()=>{t(),window.location.href="/waste"},children:"View Waste Records"})]})]})]})})]})};export{j as default};
